reportId: "SSR-S1-FINAL-Detailed"
sprintId: 1
sprintGoal: "完成核心地圖查詢與使用者註冊，為 MVP 建立基礎功能框架。"
sprintStatus: "COMPLETED_WITH_DEVIATIONS"

# --- 衝刺故事成果詳述 (Story Outcomes) ---
# 此區塊是本報告的核心，逐一詳述每個故事的計畫、執行過程與最終成果。
storyOutcomes:
  # 範例 1: 一個經歷了變更，但最終完成的故事
  - storyId: "1.1"
    storyTitle: "As a new user, I want to see veterinary clinics plotted on a map..."
    finalStatus: "COMPLETED"

    # 【驗收成果】明確列出每一條 AC 及其最終的 QA 驗證結果
    acceptanceCriteriaOutcome:
      - id: "AC-1.1-1"
        description: "App 啟動時，應請求使用者授權地理位置。"
        qaResult: "PASS"
        qaFinding: "在 iOS 17 和 Android 14 實體機上測試通過。首次安裝、卸載後重裝的授權流程均符合預期。"
      - id: "AC-1.1-2"
        description: "地圖應成功載入，並將畫面中心定位在使用者當前位置。"
        qaResult: "PASS"
        qaFinding: "在網路正常及弱網 (3G) 環境下，地圖均能成功載入。定位誤差在可接受的 20 公尺範圍內。"
      - id: "AC-1.1-3"
        description: "地圖上應顯示從資料庫讀取的診所圖標 (Pins)。"
        qaResult: "PASS"
        qaFinding: "與後端 API 串接成功，地圖上能正確顯示 50 筆診所資料。"

    # 【執行細節】包含來自 sprint_fillback 的完整開發日誌
    executionDetails:
      developerLog:
        - logType: "PROGRESS"
          taskId: "1.1-T1"
          description: "完成地理位置授權請求的實作。"
          developerNotes: "使用 Expo Location API，處理了授權成功、失敗、詢問中三種狀態。"
          changedFiles: ["src/services/LocationService.ts", "src/components/MapPermissionRequest.tsx"]
        - logType: "TACTICAL_FIX"
          taskId: "1.1-T2"
          description: "修正：地圖載入時的初始縮放等級不正確，導致視野過大。"
          developerNotes: "將地圖初始的 zoom level 從 10 調整為 15，更符合使用者預期。"
          changedFiles: ["src/screens/MainMapScreen.tsx"]
        - logType: "IMPLICIT_ITERATION"
          taskId: "1.1-T3"
          description: "優化：將地圖圖標 (Pin) 抽成可複用元件，提升未來開發效率。"
          developerNotes: "建立了 CustomMapPin.tsx 元件，未來不同類型的圖標可直接複用。"
          changedFiles: ["src/components/CustomMapPin.tsx", "src/screens/MainMapScreen.tsx"]

  # 範例 2: 一個因重大阻礙而被移除的故事
  - storyId: "1.3"
    storyTitle: "As a user in an emergency, I want a prominent 'Night Emergency' filter..."
    finalStatus: "REMOVED"

    # 【驗收成果】清楚標示因故事被移除而未進行驗證
    acceptanceCriteriaOutcome:
      - id: "AC-1.3-1"
        description: "地圖主頁上應有一個清晰可見的『夜間急診』開關或按鈕。"
        qaResult: "NOT_APPLICABLE"
        qaFinding: "因故事被移除，此項未進行驗證。"
      - id: "AC-1.3-2"
        description: "當啟用篩選時，地圖上只應顯示 `hasNightService` 欄位為 `true` 的診所。"
        qaResult: "NOT_APPLICABLE"
        qaFinding: "因故事被移除，此項未進行驗證。"

    # 【未完成工作說明】整合來自 change_proposal 的資訊，解釋為何沒完成
    uncompletedWork:
      reason: "遭遇資料庫重大技術限制 (Strategic Blocker)，經決議後從衝刺中移除。"
      changeProposalId: "SCP-001"
      details: "開發團隊在實作時發現 Firestore 無法支援地理位置與布林欄位的複合查詢。為避免影響衝刺穩定性，此 Story 被退回待辦清單，並新增一個技術研究任務來尋找替代方案。這將是下一次迭代規劃的重點。"